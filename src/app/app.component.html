<!-- Show full layout only when authenticated and not on login page -->
<div *ngIf="showLayout && isAuthenticated" class="h-screen bg-fiori-background flex flex-col">

  <!-- Header fijo -->
  <app-custom-header
    (collapsedChange)="onSidebarToggled($event)"
    (userMenuAction)="handleUserMenuAction($event)">
  </app-custom-header>

  <!-- Contenedor debajo del header -->
  <div class="flex flex-1 min-h-0">

    <!-- Sidebar con transiciÃ³n suave -->
    <app-sidebar
      [isCollapsed]="sidebarCollapsed"
      (collapsedChange)="onSidebarToggled($event)" 
      class="relative shadow-lg">
    </app-sidebar>

    <!-- Contenido con scroll independiente -->
    <main class="flex-1 overflow-y-auto bg-fiori-background p-4">
      <router-outlet></router-outlet>
    </main>

  </div>
</div>

<!-- Show only router-outlet for login page and unauthenticated users -->
<div *ngIf="!showLayout || !isAuthenticated" class="h-screen">
  <router-outlet></router-outlet>
</div>
