<div class="max-w-4xl mx-auto mt-2 bg-white rounded shadow p-6">

  <form [formGroup]="descansoForm" (ngSubmit)="onConfirm()">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium mb-1">Nombre</label>
        <input type="text" formControlName="alias" name="nombre" class="w-full border rounded px-3 py-2" required />
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Tipo de Cálculo</label>
        <mat-form-field appearance="fill" class="w-full">
          <mat-select required formControlName="calcType" name="tipoCalculo">
            <mat-option [value]="0">Auto Deducir</mat-option>
            <mat-option [value]="1">Requiere marcación</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <mat-tab-group>
      <mat-tab label="Configuración básica">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-4">
          <div>
            <label class="block text-sm font-medium mb-1">Hora de Inicio</label>
            <input type="time" formControlName="periodStart" name="horaInicio" class="w-full border rounded px-3 py-2" required />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Hora Final</label>
            <input type="time" formControlName="endMargin" name="horaFin" class="w-full border rounded px-3 py-2" required />
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">Duración (minutos)</label>
            <input type="number" formControlName="duration" name="duracion" class="w-full border rounded px-3 py-2" required />
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Configuración reglas">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-4">
          <div>
            <label class="block text-sm font-medium mb-1">Marcación Duplicada</label>
            <mat-form-field appearance="fill" class="w-full">
              <mat-select formControlName="multiplePunch" name="marcacionDuplicada">
                <mat-option [value]="0">Acorde a la regla</mat-option>
                <mat-option [value]="1">Usuario Definido</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Intervalo efectivo</label>
            <input type="number" formControlName="availableInterval" name="intervaloEfectivo" class="w-full border rounded px-3 py-2" />
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">Basado en Marcación</label>
            <mat-form-field appearance="fill" class="w-full">
              <mat-select formControlName="availableIntervalType" name="basadoMarcacion">
                <mat-option [value]="1">Si</mat-option>
                <mat-option [value]="0">No</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>

    <div class="flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200">
          <button 
            type="button" 
            (click)="cancelar()"
            class="inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
            Cancelar
          </button>
          <button 
            type="submit" 
            [disabled]="descansoForm.invalid || loading"
            class="inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
            <svg *ngIf="!loading" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75a.75.75 0 01.75-.75h7.5a.75.75 0 01.75.75z" />
            </svg>
            <div *ngIf="loading" class="w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
            {{ isEditMode ? 'Actualizar' : 'Guardar' }}
          </button>
    </div>

  </form>
</div>
