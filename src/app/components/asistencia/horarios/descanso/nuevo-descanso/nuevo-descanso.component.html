<div class="max-w-4xl mx-auto mt-8 bg-white rounded shadow p-6">
  <h2 class="text-xl font-semibold mb-4" *ngIf="idDescanso==0; else EditDescanso">Nuevo Descanso</h2>
  <ng-template #EditDescanso>
    <h2 class="text-xl font-semibold mb-4">Editar</h2>
  </ng-template>

  <form [formGroup]="descansoForm" (ngSubmit)="onConfirm()">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
      <div>
        <label class="block text-sm font-medium mb-1">Nombre</label>
        <input type="text" formControlName="alias" name="nombre" class="w-full border rounded px-3 py-2" required />
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Tipo de Cálculo</label>
        <mat-form-field appearance="fill" class="w-full">
          <mat-select required formControlName="calcType" name="tipoCalculo">
            <mat-option [value]="0">Auto Deducir</mat-option>
            <mat-option [value]="1">Requiere marcación</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <mat-tab-group>
      <mat-tab label="Configuración básica">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-4">
          <div>
            <label class="block text-sm font-medium mb-1">Hora de Inicio</label>
            <input type="time" formControlName="periodStart" name="horaInicio" class="w-full border rounded px-3 py-2" required />
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Hora Final</label>
            <input type="time" formControlName="endMargin" name="horaFin" class="w-full border rounded px-3 py-2" required />
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">Duración (minutos)</label>
            <input type="number" formControlName="duration" name="duracion" class="w-full border rounded px-3 py-2" required />
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Configuración reglas">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 p-4">
          <div>
            <label class="block text-sm font-medium mb-1">Marcación Duplicada</label>
            <mat-form-field appearance="fill" class="w-full">
              <mat-select formControlName="multiplePunch" name="marcacionDuplicada">
                <mat-option [value]="0">Acorde a la regla</mat-option>
                <mat-option [value]="1">Usuario Definido</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div>
            <label class="block text-sm font-medium mb-1">Intervalo efectivo</label>
            <input type="number" formControlName="availableInterval" name="intervaloEfectivo" class="w-full border rounded px-3 py-2" />
          </div>
          <div class="md:col-span-2">
            <label class="block text-sm font-medium mb-1">Basado en Marcación</label>
            <mat-form-field appearance="fill" class="w-full">
              <mat-select formControlName="availableIntervalType" name="basadoMarcacion">
                <mat-option [value]="1">Si</mat-option>
                <mat-option [value]="0">No</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>

    <div class="mt-6 flex justify-end gap-2">
      <button mat-raised-button color="primary" type="submit" [disabled]="!descansoForm.valid">Confirmar</button>
      <button mat-button type="button" (click)="onCancel()">Cancelar</button>
    </div>
  </form>
</div>
