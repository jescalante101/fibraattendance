<mat-card>
  <div class="modal-container">
    <h2 mat-dialog-title>Nuevo Turno</h2>
    <div>
      <mat-form-field appearance="outline" class="nombre-input">
        <mat-label>Nombre del Turno</mat-label>
        <input
          matInput
          [(ngModel)]="nombreTurno"
          placeholder="Ingrese nombre del turno"
        />
      </mat-form-field>
      <mat-slide-toggle class="text-success" color="secondary"
        >Turno Automatico</mat-slide-toggle
      >
    </div>
    <div class="tables-container">
      <!-- Tabla de Horarios -->
      <div class="horarios-table">
        <h3>Horarios Disponibles</h3>
        <div class="tabla-scroll-x">
          <table mat-table [dataSource]="dataHorarios" class="mat-elevation-z2">
            <!-- Checkbox Column -->
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef style="padding: 0.5rem">
                <small>Seleccionar</small>
              </th>
              <td mat-cell *matCellDef="let horario" style="padding: 0.1rem">
                <small>
                  <mat-checkbox
                    (click)="$event.stopPropagation()"
                    (change)="toggleHorarioSelection(horario)"
                    [checked]="isSelected(horario)"
                    color="primary"
                  >
                  </mat-checkbox>
                </small>
              </td>
            </ng-container>
            <!-- Nombre Column -->
            <ng-container matColumnDef="nombre">
              <th mat-header-cell *matHeaderCellDef style="padding: 0.5rem">
                <small>Nombre</small>
              </th>
              <td mat-cell *matCellDef="let horario" style="padding: 0.1rem">
                <small>{{ horario.nombre }}</small>
              </td>
            </ng-container>
            <!-- Entrada Column -->
            <ng-container matColumnDef="entrada">
              <th mat-header-cell *matHeaderCellDef style="padding: 0.5rem">
                <small>Entrada</small>
              </th>
              <td mat-cell *matCellDef="let horario" style="padding: 0.1rem">
                <small>{{ horario.horaEntrada }}</small>
              </td>
            </ng-container>
            <!-- Salida Column -->
            <ng-container matColumnDef="salida">
              <th mat-header-cell *matHeaderCellDef style="padding: 0.5rem">
                <small>Salida</small>
              </th>
              <td mat-cell *matCellDef="let horario" style="padding: 0.1rem">
                <small>{{ horario.horaSalida }}</small>
              </td>
            </ng-container>
            <!-- Descanso Column -->
            <ng-container matColumnDef="descanso">
              <th mat-header-cell *matHeaderCellDef style="padding: 0.5rem">
                <small>Descanso</small>
              </th>
              <td mat-cell *matCellDef="let horario" style="padding: 0.1rem">
                <small>{{ horario.descanso }}</small>
              </td>
            </ng-container>
            <tr
              mat-header-row
              *matHeaderRowDef="[
                'select',
                'nombre',
                'entrada',
                'salida',
                'descanso'
              ]"
            ></tr>
            <tr
              mat-row
              *matRowDef="
                let row;
                columns: ['select', 'nombre', 'entrada', 'salida', 'descanso']
              "
            ></tr>
          </table>
        </div>
        <mat-paginator
          [length]="totalRecords"
          [pageSize]="pageSize"
          [pageSizeOptions]="[5, 10, 15]"
          (page)="handlePageEvent($event)"
          aria-label="Seleccionar página de horarios"
        >
        </mat-paginator>
      </div>
      <!-- Tabla de Semana -->
      <div class="semana-table">
        <h3>Horario Semanal</h3>
        <mat-card>
          <div
            style="
              display: flex;
              flex-direction: row;
              gap: 16px;
              align-items: center;
            "
          >
            <mat-form-field>
              <mat-select [(ngModel)]="tipoVistaHorario">
                <mat-option value="Dia">Día</mat-option>
                <mat-option value="Semana">Semana</mat-option>
                <mat-option value="Mes">Mes</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline" style="width: 100px">
              <mat-label>Ciclo</mat-label>
              <input
                matInput
                type="number"
                [(ngModel)]="cicloValor"
                min="1"
                placeholder="1"
                (ngModelChange)="onCicloValorChange()"
              />
            </mat-form-field>
          </div>
          <div class="tabla-scroll-x">
            <ng-container [ngSwitch]="tipoVistaHorario">
              <!-- Vista Día -->
              <table
                *ngSwitchCase="'Dia'"
                mat-table
                [dataSource]="horariosDiaPorFila"
                class="mat-elevation-z2"
              >
                <ng-container matColumnDef="horario">
                  <th mat-header-cell *matHeaderCellDef>
                    <small>Horario</small>
                  </th>
                  <td mat-cell *matCellDef="let row; let i = index">
                    <mat-card
                      style=" cursor: pointer"
                      (click)="asignarHorariosSeleccionadosADia(i)"
                      (dblclick)="limpiarHorariosDiaCelda(i)"
                    >
                      <mat-card-content>
                        <div>
                          <span
                            *ngFor="let horario of horariosDiaPorFila[i]"
                            style="
                              background: #e0e0e0;
                              margin: 2px;
                              padding: 2px 8px;
                              border-radius: 4px;
                              display: inline-block;
                            "
                          >
                            {{ horario.nombre }}
                          </span>
                        </div>
                        <small style="color: #888"
                          >Haz click para asignar los horarios seleccionados<br>
                          Doble click para limpiar</small
                        >
                      </mat-card-content>
                    </mat-card>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="['horario']"></tr>
                <tr mat-row *matRowDef="let row; columns: ['horario']"></tr>
              </table>
              <!-- Vista Semana -->
              <table
                *ngSwitchCase="'Semana'"
                mat-table
                [dataSource]="horariosSemanaPorFila"
                class="mat-elevation-z2"
              >
                <ng-container
                  *ngFor="let dia of diasSemana; let j = index"
                  [matColumnDef]="dia"
                >
                  <th mat-header-cell *matHeaderCellDef>
                    <small>{{ dia }}</small>
                  </th>
                  <td mat-cell *matCellDef="let semana; let i = index">
                    <mat-card
                      style="width: 180px; cursor: pointer"
                      (click)="asignarHorariosSeleccionadosASemana(i, dia)"
                      (dblclick)="limpiarHorariosSemanaCelda(i, dia)"
                    >
                      <mat-card-content>
                        <div>
                          <span
                            *ngFor="let horario of horariosSemanaPorFila[i][dia]"
                            style="
                              background: #e0e0e0;
                              margin: 2px;
                              padding: 2px 8px;
                              border-radius: 4px;
                              display: inline-block;
                            "
                          >
                            {{ horario.nombre }}
                          </span>
                        </div>
                        <small style="color: #888"
                          >Haz click para asignar los horarios seleccionados<br>
                          Doble click para limpiar</small
                        >
                      </mat-card-content>
                    </mat-card>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="diasSemana"></tr>
                <tr mat-row *matRowDef="let row; columns: diasSemana"></tr>
              </table>
              <!-- Vista Mes -->
              <table
                *ngSwitchCase="'Mes'"
                mat-table
                [dataSource]="horariosMesPorFila"
                class="mat-elevation-z2"
              >
                <ng-container
                  *ngFor="let dia of diasMes; let j = index"
                  [matColumnDef]="'dia' + j"
                >
                  <th mat-header-cell *matHeaderCellDef>
                    <small>{{ j + 1 }}</small>
                  </th>
                  <td mat-cell *matCellDef="let fila; let i = index">
                    <mat-card
                      style="width: 180px; cursor: pointer"
                      (click)="asignarHorariosSeleccionadosAMes(i, j)"
                      (dblclick)="limpiarHorariosMesCelda(i, j)"
                    >
                      <mat-card-content>
                        <div>
                          <span
                            *ngFor="let horario of horariosMesPorFila[i][j]"
                            style="
                              background: #e0e0e0;
                              margin: 2px;
                              padding: 2px 8px;
                              border-radius: 4px;
                              display: inline-block;
                            "
                          >
                            {{ horario.nombre }}
                          </span>
                        </div>
                        <small style="color: #888"
                          >Haz click para asignar los horarios seleccionados<br>
                          Doble click para limpiar</small
                        >
                      </mat-card-content>
                    </mat-card>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="diasMesColumnas"></tr>
                <tr mat-row *matRowDef="let row; columns: diasMesColumnas"></tr>
              </table>
            </ng-container>
          </div>
        </mat-card>
      </div>
    </div>
    <div mat-dialog-actions align="end">
      <button mat-button (click)="cancelar()">Cancelar</button>
      <button mat-raised-button color="primary" (click)="guardarTurno()">
        Guardar
      </button>
    </div>
  </div>
</mat-card>

<!-- Agrega este CSS en tu archivo de estilos correspondiente -->
