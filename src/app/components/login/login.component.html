<!-- Modern Fiori Login for Fibra Asistencia -->
<div class="min-h-screen bg-gradient-to-br from-fiori-primary via-fiori-secondary to-fiori-primary flex items-center justify-center p-4">
  <!-- Background Pattern -->
  <div class="absolute inset-0 opacity-10">
    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJtMzYgMzQgNi0ydjEzbC02LTJ2LTl6bS0yIDJoLTh2LTloOHY5em0tMTAgMGgtOHYtOWg4djl6bS0xMCAwaDh2LTJsNiAydjlsLTYtMmgtOHYtN3oiLz48L2c+PC9nPjwvc3ZnPg==')] bg-repeat"></div>
  </div>

  <!-- Login Card -->
  <div class="relative w-full max-w-md">
    <!-- Main Card -->
    <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-8 border border-white/20">
      <!-- Header Section -->
      <div class="text-center mb-8">
        <!-- Logo -->
        <div class="mb-6">
          <div class="w-20 h-20 mx-auto bg-gradient-to-br from-fiori-primary to-fiori-secondary rounded-2xl flex items-center justify-center shadow-lg">
            <mat-icon class="text-3xl text-white">access_time</mat-icon>
          </div>
        </div>
        
        <!-- Title -->
        <div class="space-y-2">
          <h1 class="text-2xl font-bold text-fiori-text">FIBRA ASISTENCIA</h1>
          <p class="text-sm text-fiori-subtext font-medium">Sistema de Control de Asistencia</p>
          <div class="w-16 h-1 bg-gradient-to-r from-fiori-primary to-fiori-accent mx-auto rounded-full"></div>
        </div>
      </div>

      <!-- Login Form -->
      <form #loginForm="ngForm" (ngSubmit)="login(loginForm)" class="space-y-6">
        <!-- Username Field -->
        <div class="space-y-2">
          <label class="block text-sm font-medium text-fiori-text">Usuario</label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <mat-icon class="text-fiori-subtext text-lg">person</mat-icon>
            </div>
            <input 
              type="text" 
              name="userName"
              [(ngModel)]="credentials.userName"
              #usernameInput="ngModel"
              required
              minlength="3"
              class="block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fiori-primary focus:border-transparent transition-all duration-200 bg-white/90"
              [class.border-red-300]="usernameInput.invalid && usernameInput.touched"
              [class.border-fiori-primary]="usernameInput.valid && usernameInput.touched"
              placeholder="Ingrese su usuario"
              autocomplete="username">
          </div>
          <div *ngIf="usernameInput.invalid && usernameInput.touched" class="text-red-500 text-xs mt-1">
            <span *ngIf="usernameInput.errors?.['required']">El usuario es requerido</span>
            <span *ngIf="usernameInput.errors?.['minlength']">Mínimo 3 caracteres</span>
          </div>
        </div>

        <!-- Password Field -->
        <div class="space-y-2">
          <label class="block text-sm font-medium text-fiori-text">Contraseña</label>
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <mat-icon class="text-fiori-subtext text-lg">lock</mat-icon>
            </div>
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              name="password"
              [(ngModel)]="credentials.password"
              #passwordInput="ngModel"
              required
              minlength="4"
              class="block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fiori-primary focus:border-transparent transition-all duration-200 bg-white/90"
              [class.border-red-300]="passwordInput.invalid && passwordInput.touched"
              [class.border-fiori-primary]="passwordInput.valid && passwordInput.touched"
              placeholder="Ingrese su contraseña"
              autocomplete="current-password">
            <button 
              type="button"
              (click)="togglePasswordVisibility()"
              class="absolute inset-y-0 right-0 pr-3 flex items-center text-fiori-subtext hover:text-fiori-primary transition-colors">
              <mat-icon class="text-lg">{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
          </div>
          <div *ngIf="passwordInput.invalid && passwordInput.touched" class="text-red-500 text-xs mt-1">
            <span *ngIf="passwordInput.errors?.['required']">La contraseña es requerida</span>
            <span *ngIf="passwordInput.errors?.['minlength']">Mínimo 4 caracteres</span>
          </div>
        </div>

        <!-- Remember Me -->
        <div class="flex items-center justify-between">
          <label class="flex items-center space-x-2 cursor-pointer">
            <input 
              type="checkbox" 
              [(ngModel)]="rememberMe" 
              name="rememberMe"
              class="w-4 h-4 text-fiori-primary border-gray-300 rounded focus:ring-fiori-primary focus:ring-2">
            <span class="text-sm text-fiori-subtext">Recordarme</span>
          </label>
          <button 
            type="button" 
            class="text-sm text-fiori-primary hover:text-fiori-secondary transition-colors font-medium">
            ¿Olvidaste tu contraseña?
          </button>
        </div>

        <!-- Error Message -->
        <div *ngIf="errorMessage" class="bg-red-50 border border-red-200 rounded-lg p-3">
          <div class="flex items-center space-x-2">
            <mat-icon class="text-red-500 text-sm">error</mat-icon>
            <span class="text-red-700 text-sm">{{ errorMessage }}</span>
          </div>
        </div>

        <!-- Login Button -->
        <button 
          type="submit" 
          [disabled]="loginForm.invalid || isLoading"
          class="w-full bg-gradient-to-r from-fiori-primary to-fiori-secondary text-white font-medium py-3 px-4 rounded-lg transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center space-x-2">
          <mat-spinner *ngIf="isLoading" diameter="20" color="accent"></mat-spinner>
          <mat-icon *ngIf="!isLoading" class="text-lg">login</mat-icon>
          <span>{{ isLoading ? 'Iniciando sesión...' : 'Iniciar Sesión' }}</span>
        </button>
      </form>

      <!-- Footer -->
      <div class="mt-8 text-center space-y-3">
        <div class="flex items-center justify-center space-x-4 text-xs text-fiori-subtext">
          <div class="flex items-center space-x-1">
            <mat-icon class="text-xs">shield</mat-icon>
            <span>Seguro</span>
          </div>
          <div class="w-1 h-1 bg-fiori-subtext rounded-full"></div>
          <div class="flex items-center space-x-1">
            <mat-icon class="text-xs">schedule</mat-icon>
            <span>24/7</span>
          </div>
          <div class="w-1 h-1 bg-fiori-subtext rounded-full"></div>
          <div class="flex items-center space-x-1">
            <mat-icon class="text-xs">business</mat-icon>
            <span>Empresarial</span>
          </div>
        </div>
        <p class="text-xs text-fiori-subtext">
          © 2025 FibraFil. Todos los derechos reservados.
        </p>
      </div>
    </div>

    <!-- Floating Elements -->
    <div class="absolute -top-4 -right-4 w-8 h-8 bg-fiori-accent rounded-full opacity-20 animate-pulse"></div>
    <div class="absolute -bottom-6 -left-6 w-12 h-12 bg-fiori-primary/20 rounded-full opacity-30 animate-pulse animation-delay-1000"></div>
  </div>
</div>
