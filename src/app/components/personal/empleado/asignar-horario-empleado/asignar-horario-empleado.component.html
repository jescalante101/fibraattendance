<div class="max-w-7xl mx-auto  space-y-6">
  <!-- Cabecera y bot√≥n -->
  <div class="flex justify-between items-center">
    <span class="text-title">Personal con Turno</span>
    <button class="btn-fiori" (click)="irAEmpleados()">
      + Asignar Turno
    </button>
  </div>

  <!-- Campo de filtro -->
  <div class="flex items-center gap-2 bg-white border rounded-lg shadow-sm p-3">
    <div class="relative flex-1 max-w-sm">
      <input
        type="text"
        [(ngModel)]="filtro"
        
        placeholder="Buscar por nombre..."
        class="w-full px-3 py-2 pr-10 text-sm border border-fiori-border rounded focus:outline-none focus:ring-2 focus:ring-fiori-primary"
      />
      <button 
        class="absolute right-2 top-1/2 transform -translate-y-1/2 text-fiori-subtext hover:text-fiori-primary"
        (click)="aplicarFiltro()"
      >
        <span class="material-icons text-base">search</span>
      </button>
    </div>
    <input
      type="date"
      [(ngModel)]="startDate"
      placeholder="Fecha inicio"
      class="px-3 py-2 text-sm border border-fiori-border rounded focus:outline-none focus:ring-2 focus:ring-fiori-primary"
    />
    <input
      type="date"
      [(ngModel)]="endDate"
      placeholder="Fecha fin"
      class="px-3 py-2 text-sm border border-fiori-border rounded focus:outline-none focus:ring-2 focus:ring-fiori-primary"
    />
    <button 
      class="btn-fiori-secondary"
      (click)="aplicarFiltroFechas()"
    >
      Filtrar Fechas
    </button>
  </div>

  <!-- Tabla empleados -->
<div class="relative card-fiori overflow-x-auto h-[550px] lg:h-[900px] xl:h-full flex flex-col">
  <!-- Overlay de loading -->
  <div *ngIf="loading" class="absolute inset-0 z-10 flex items-center justify-center bg-white/70">
    <mat-progress-spinner mode="indeterminate" color="primary" diameter="50"></mat-progress-spinner>
  </div>
  <!-- Contenedor con scroll horizontal y vertical -->
  <div class="flex-1 overflow-y-auto">
    <table mat-table [dataSource]="employees" class="min-w-full w-max text-sm" matSort>
      <!-- Columnas aqu√≠ (igual que antes) -->
      <ng-container matColumnDef="employeeId">
        <th mat-header-cell *matHeaderCellDef>ID Empleado</th>
        <td mat-cell *matCellDef="let emp">{{ emp.employeeId }}</td>
      </ng-container>
      <ng-container matColumnDef="nroDoc">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Documento</th>
        <td mat-cell *matCellDef="let emp">{{ emp.nroDoc }}</td>
      </ng-container>
      <ng-container matColumnDef="fullNameEmployee">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre Completo</th>
        <td mat-cell *matCellDef="let emp">{{ emp.fullNameEmployee }}</td>
      </ng-container>
      <ng-container matColumnDef="scheduleName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Turno</th>
        <td mat-cell *matCellDef="let emp">{{ emp.scheduleName }}</td>
      </ng-container>
      <ng-container matColumnDef="createdWeek">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Semana Creada</th>
        <td mat-cell *matCellDef="let emp">{{ emp.createdWeek }}</td>
      </ng-container>
      <ng-container matColumnDef="locationName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Ubicaci√≥n</th>
        <td mat-cell *matCellDef="let emp">{{ emp.locationName }}</td>
      </ng-container>
      <ng-container matColumnDef="areaName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>√Årea</th>
        <td mat-cell *matCellDef="let emp">{{ emp.areaName }}</td>
      </ng-container>
      <ng-container matColumnDef="startDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha Inicio</th>
        <td mat-cell *matCellDef="let emp">{{ emp.startDate }}</td>
      </ng-container>
      <ng-container matColumnDef="endDate">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha Fin</th>
        <td mat-cell *matCellDef="let emp">{{ emp.endDate }}</td>
      </ng-container>
      <ng-container matColumnDef="remarks">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Observaciones</th>
        <td mat-cell *matCellDef="let emp">{{ emp.remarks }}</td>
      </ng-container>
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef class="text-right">Acciones</th>
        <td mat-cell *matCellDef="let emp" class="text-right space-x-1">
          <button class="text-fiori-primary hover:underline" (click)="editar(emp)" title="Editar">‚úèÔ∏è</button>
          <button class="text-fiori-error hover:underline" (click)="eliminar(emp)" title="Eliminar">üóëÔ∏è</button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      <tr *ngIf="employees.length === 0 && !loading">
        <td [attr.colspan]="displayedColumns.length" class="text-center py-8 text-fiori-subtext">
          <div class="flex flex-col items-center justify-center">
            <mat-icon class="mb-2" style="font-size: 48px;">group_off</mat-icon>
            <span class="text-lg font-medium mb-2">No se encontraron empleados</span>
            <span>Prueba con diferentes filtros o a√±ade un nuevo empleado</span>
          </div>
        </td>
      </tr>
    </table>
  </div>
  <!-- Paginador siempre visible debajo de la tabla -->
  <mat-paginator
    [length]="totalCount"
    [pageSize]="pageSize"
    [pageIndex]="pageNumber - 1"
    [pageSizeOptions]="[5, 10, 15, 25, 50]"
    (page)="onPageChange($event)"
    class="bg-white sticky bottom-0 z-20"
    showFirstLastButtons>
  </mat-paginator>
</div>
