<!-- Encabezado del diálogo -->
<div class="flex justify-between items-center mb-4">
  <h2 class="text-title">Asignar Horario</h2>
  <button
    class="text-fiori-subtext hover:text-fiori-error text-sm font-medium"
    (click)="cerrar()"
  >
    ✖ Cerrar
  </button>
</div>

<!-- Filtro de empleados -->
<input
  type="text"
  [(ngModel)]="filtro"
  placeholder="Buscar empleado..."
  class="w-full px-4 py-2 border border-fiori-border rounded mb-4 text-sm shadow-sm focus:ring-2 focus:ring-fiori-primary"
/>

<!-- Tabla de empleados -->
<div class="rounded-lg border border-fiori-border overflow-hidden shadow-sm">
  <table class="w-full text-sm">
    <thead class="bg-fiori-muted text-left text-fiori-subtext uppercase text-xs tracking-wider">
      <tr>
        <th class="px-4 py-2">Empleado</th>
        <th class="px-4 py-2 text-right">Acción</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let emp of empleadosFiltrados" class="border-t hover:bg-fiori-hover transition">
        <td class="px-4 py-2">{{ emp.nombre }}</td>
        <td class="px-4 py-2 text-right">
          <button class="btn-fiori" (click)="abrirSlideOver(emp)">Asignar</button>
        </td>
      </tr>
      <tr *ngIf="empleadosFiltrados.length === 0">
        <td colspan="2" class="text-center py-6 text-fiori-subtext">
          No hay empleados disponibles.
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Slide-over lateral -->
<div *ngIf="slideOver" class="fixed inset-0 z-50 flex">
  <!-- Fondo oscuro -->
  <div class="bg-black bg-opacity-30 w-full" (click)="cerrarSlideOver()"></div>

  <!-- Panel lateral derecho -->
  <div class="w-full max-w-md bg-white shadow-xl p-6 overflow-y-auto animate-slide-in">
    <!-- Cabecera del slide-over -->
    <div class="flex justify-between items-start mb-6">
      <div>
        <h2 class="text-title mb-1">Asignar Horario</h2>
        <p class="text-sm text-fiori-subtext">{{ empleadoSeleccionado?.nombre }}</p>
      </div>
      <button
        class="text-fiori-subtext hover:text-fiori-error text-sm font-medium"
        (click)="cerrarSlideOver()"
      >
        ✖
      </button>
    </div>

    <!-- Campo Horario -->
    <div class="mb-4">
      <label class="text-label block mb-1">Horario</label>
      <input
        type="text"
        [(ngModel)]="formDetalle.horario"
        placeholder="Ej. Mañana"
        class="w-full px-3 py-2 border border-fiori-border rounded text-sm"
      />
    </div>

    <!-- Campo Semana -->
    <div class="mb-4">
      <label class="text-label block mb-1">Semana</label>
      <input
        type="number"
        min="1"
        max="53"
        [(ngModel)]="formDetalle.semana"
        class="w-full px-3 py-2 border border-fiori-border rounded text-sm"
      />
    </div>

    <!-- Campo Fechas -->
    <div class="mb-4">
      <label class="text-label block mb-1">Fechas</label>
      <div class="flex gap-2">
        <input
          type="date"
          [(ngModel)]="formDetalle.fechaInicio"
          class="w-1/2 px-3 py-2 border border-fiori-border rounded text-sm"
        />
        <input
          type="date"
          [(ngModel)]="formDetalle.fechaFin"
          class="w-1/2 px-3 py-2 border border-fiori-border rounded text-sm"
        />
      </div>
    </div>

    <!-- Campo Observación -->
    <div class="mb-6">
      <label class="text-label block mb-1">Observación</label>
      <textarea
        [(ngModel)]="formDetalle.observacion"
        rows="3"
        class="w-full px-3 py-2 border border-fiori-border rounded text-sm"
      ></textarea>
    </div> 

    <!-- Acciones -->
    <div class="flex justify-end gap-2">
      <button class="btn-fiori-secondary" (click)="cerrarSlideOver()">Cancelar</button>
      <button class="btn-fiori" (click)="guardarHorario()">Guardar</button>
    </div>
  </div>
</div>
